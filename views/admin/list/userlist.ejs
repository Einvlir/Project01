<%
    var totalRecord = param.record.length;
    var pageSize = 5;
    var totalPage = Math.ceil(totalRecord/pageSize);
    var blockSize=10;
    var currentPage = param.currentPage;
    var curPos = (currentPage-1)*pageSize;// 배열의 시작인덱스
    var num =totalRecord - curPos ;
    var nextPage = Math.ceil(currentPage/pageSize)*pageSize+1
    var prevPage = (Math.ceil(currentPage/pageSize)-1)*pageSize
%>
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/css/admin_topnavi.css">
        <style>
table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
    border: 1px solid #ddd;
}

td,th {
    text-align: left;
    padding: 16px;
}


tr:nth-child(even) {
    background-color: #f2f2f2;
}

</style>
</head>
<body>
    <%- include ('../inc/topnavi')%>
    
    <h2><%=currentPage+" 페이지"%></h2>
    <p>관리자를 위한 회원관리 테이블입니다.</p>

    <table>
        <tr>
            <th>No</th>
            <th>ID</th>
            <th>이름</th>
            <th>닉네임</th>
            <th>가입일자</th>
        </tr>
        <%for(var i = 1; i<=pageSize; i++){%>
            <%if(num<1)break;%>
                <%var member = param.record[curPos++]%>
                <%var regdate = new Date(member.regdate)%>
        <tr>
            <td><%=(num--)%></td>
            
            <td>
                <a href="/admin/list/userdetail?user_No=<%=member.user_No%>"><%=member.user_id%></a>
            </td>
            <td>
                <%=member.user_name%></a>
            </td>
            <td><%=member.user_nickname%></td>
            <td><%=regdate.getFullYear()%>-<%=regdate.getMonth()+1%>-<%=regdate.getDate()%></td>
        </tr>
        <%}%>
        <tr>
            <td colspan="6" style="text-align: center;">
                <%if(prevPage<1){%>
                    <a href = "/admin/list/userlist?currentPage=<%=1%>">◀</a>
                <%}else{%>
                    <a href = "/admin/list/userlist?currentPage=<%=prevPage%>">◀</a>
                <%}%>
                <%for(var i=1;i<=blockSize;i++){%>
                    <%if(i>totalPage)break;%>
                    <a href = "/admin/list/userlist?currentPage=<%=i%>">[<%=i%>]</a>
                    <%}%>
                <%if(nextPage>totalPage){%>
                    <a href = "/admin/list/userlist?currentPage=<%=totalPage%>">▶</a>
                <%}else{%>
                    <a href = "/admin/list/userlist?currentPage=<%=nextPage%>">▶</a>
                <%}%>
                    
                    
                </td>
            </tr>
        </table>
        <br>
        
        
    </body>
    </html>